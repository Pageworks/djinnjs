<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>Dev Docs</title>

        <link href="/normalize.css" rel="stylesheet" />
        <link href="/reset.css" rel="stylesheet" />
        <link href="/brixi.css" rel="stylesheet" />
        <link href="/base.css" rel="stylesheet" />

        <script defer src="/prism.js"></script>
        <link href="/prism.css" rel="stylesheet" />

        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet" />

        <script defer src="/nav.js"></script>
    </head>
    <body>
        <main>
            <aside><nav><header>Documents</header><a href="/code-of-conduct" data-slug="/code-of-conduct"><span>code of conduct</span></a><a href="/configuration" data-slug="/configuration"><span>configuration</span></a><a href="/contributing" data-slug="/contributing"><span>contributing</span></a><a href="/developers" data-slug="/developers"><span>developers</span></a><a href="/installation" data-slug="/installation"><span>installation</span></a><a href="/readme" data-slug="/readme"><span>readme</span></a><header>core</header><a href="/core/importing-resources" data-slug="/core/importing-resources"><span>importing resources</span></a><a href="/core/lazy-loading" data-slug="/core/lazy-loading"><span>lazy loading</span></a><a href="/core/pjax" data-slug="/core/pjax"><span>pjax</span></a><a href="/core/progressive-enhancements" data-slug="/core/progressive-enhancements"><span>progressive enhancements</span></a><a href="/core/requesting-css" data-slug="/core/requesting-css"><span>requesting css</span></a><a href="/core/web-components" data-slug="/core/web-components"><span>web components</span></a><header>guides</header><a href="/guides/adding-npm-packages" data-slug="/guides/adding-npm-packages"><span>adding npm packages</span></a><a href="/guides/demo-project" data-slug="/guides/demo-project"><span>demo project</span></a><a href="/guides/frameworks" data-slug="/guides/frameworks"><span>frameworks</span></a><header>loading states</header><a href="/loading-states/hard" data-slug="/loading-states/hard"><span>hard</span></a><a href="/loading-states/page" data-slug="/loading-states/page"><span>page</span></a><a href="/loading-states/soft" data-slug="/loading-states/soft"><span>soft</span></a><header>messaging system</header><a href="/messaging-system/actor-model" data-slug="/messaging-system/actor-model"><span>actor model</span></a><a href="/messaging-system/actors" data-slug="/messaging-system/actors"><span>actors</span></a><a href="/messaging-system/broadcaster" data-slug="/messaging-system/broadcaster"><span>broadcaster</span></a><a href="/messaging-system/hooks" data-slug="/messaging-system/hooks"><span>hooks</span></a><a href="/messaging-system/sending-messages" data-slug="/messaging-system/sending-messages"><span>sending messages</span></a><header>page transitions</header><a href="/page-transitions/custom" data-slug="/page-transitions/custom"><span>custom</span></a><a href="/page-transitions/default" data-slug="/page-transitions/default"><span>default</span></a></nav></aside>
            <article><h1 id="sampleproject">Sample Project</h1>
<p>This section will explain how to set up a static website using <a href="https://sass-lang.com/">SASS</a> and <a href="https://www.typescriptlang.org/">TypeScript</a>. The site will be served using <a href="https://www.npmjs.com/package/serve">serve</a>, if you need Apache or NGINX you will need to modify and ingore parts of this demo.</p>
<p>Create the <code>package.json</code> file</p>
<pre><code class="json language-json">{
    "scripts": {
        "build": "tsc &amp;&amp; node ./scss.config.js &amp;&amp; djinnjs &amp;&amp; rm -rf ./_compiled",
        "preview": "serve -d ./public"
    },
    "devDependencies": {
        "glob": "^7.1.6",
        "node-sass": "^4.13.0",
        "serve": "^11.3.0",
        "typescript": "^3.7.4"
    }
}
</code></pre>
<p>Install npm packages</p>
<pre><code class="bash language-bash">npm i
</code></pre>
<p>Create the <code>tsconfig.json</code> file</p>
<pre><code class="json language-json">{
    "compilerOptions": {
        "outDir": "_compiled/js",
        "allowJs": true,
        "checkJs": true,
        "target": "ES2019",
        "module": "ESNext",
        "lib": ["DOM", "ES2019"],
        "moduleResolution": "Node"
    },
    "include": ["src"],
    "exclude": ["node_modules"]
}
</code></pre>
<p>Create the <code>.gitignore</code> file</p>
<pre><code class="bash language-bash"># Junk
# -------
node_modules
_compiled
.DS_Store

# Automated Files
# -------
public/assets
public/service-worker.js
public/resources-cachebust.json
</code></pre>
<p>Create <code>sass.config.js</code></p>
<pre><code class="javascript language-javascript">const sass = require('node-sass');
const glob = require('glob');
const fs = require('fs');

const sourceDir = 'src';

class SassCompiler {
    constructor() {
        this.run();
    }

    async run() {
        try {
            await this.preflight();
            const files = await this.getFiles();
            await this.compile(files);
        } catch (error) {
            console.log(error);
        }
    }

    preflight() {
        return new Promise(resolve =&gt; {
            if (!fs.existsSync('_compiled')) {
                fs.mkdirSync('_compiled');
            }
            if (!fs.existsSync('_compiled/css')) {
                fs.mkdirSync('_compiled/css');
            }
            resolve();
        });
    }

    getFiles() {
        return new Promise((resolve, reject) =&gt; {
            glob(`${sourceDir}/**/*.scss`, (error, files) =&gt; {
                if (error) {
                    reject(error);
                }

                resolve(files);
            });
        });
    }

    compile(files) {
        return new Promise((resolve, reject) =&gt; {
            let count = 0;
            for (let i = 0; i &lt; files.length; i++) {
                const file = files[i];
                sass.render(
                    {
                        file: file,
                        outputStyle: 'compressed',
                    },
                    (error, result) =&gt; {
                        if (error) {
                            reject(`${error.message} at line ${error.line} ${error.file}`);
                        } else {
                            let fileName = result.stats.entry.replace(/.*\//g, '').toLowerCase();
                            fileName = fileName.replace(/(.scss)|(.sass)/g, '').trim();
                            if (fileName) {
                                const newFile = `_compiled/css/${fileName}.css`;
                                fs.writeFile(newFile, result.css.toString(), error =&gt; {
                                    if (error) {
                                        reject('Something went wrong saving the file' + error);
                                    }

                                    count++;
                                    if (count === files.length) {
                                        resolve();
                                    }
                                });
                            } else {
                                reject('Something went wrong with the file name of ' + result.stats.entry);
                            }
                        }
                    }
                );
            }
        });
    }
}
new SassCompiler();
</code></pre>
<p>Create <code>djinnjs.config.js</code></p>
<pre><code class="javascript language-javascript">module.exports = {
    src: './_compiled'
}
</code></pre>
<p>Create the public directory</p>
<pre><code class="bash language-bash">mkdir ./public
</code></pre>
<p>Create an <code>index.html</code> file</p>
<pre><code class="html language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en" state="hard-loading"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;

    &lt;title&gt;Demo Website&lt;/title&gt;
    &lt;meta name="description" content="This website was created using the DjinnJS quick start guide."&gt;

&lt;/head&gt;
&lt;body&gt;
    &lt;!-- Loading animation elements --&gt;
    &lt;page-loading&gt;
        &lt;div&gt;
            &lt;djinnjs-file-loading-message&gt;Loading page&lt;/djinnjs-file-loading-message&gt;
            &lt;djinnjs-file-loading-value&gt;&lt;/djinnjs-file-loading-value&gt;
            &lt;page-loading-bar&gt;
                &lt;bar-one&gt;&lt;/bar-one&gt;
                &lt;bar-two&gt;&lt;/bar-two&gt;
            &lt;/page-loading-bar&gt;
        &lt;/div&gt;
    &lt;/page-loading&gt;
    &lt;soft-loading&gt;
        &lt;transition-bar-one&gt;&lt;/transition-bar-one&gt;
        &lt;transition-bar-two&gt;&lt;/transition-bar-two&gt;
    &lt;/soft-loading&gt;
    &lt;page-transition&gt;
        &lt;page-transition-bar&gt;&lt;/page-transition-bar&gt;
    &lt;/page-transition&gt;

    &lt;!-- Content --&gt;
    &lt;main&gt;
    &lt;/main&gt;

    &lt;!-- Noscript message --&gt;
    &lt;noscript&gt;
        &lt;p id="noscript-message"&gt;Parts of this website require JavaScript. Please re-enable JavaScript and reload the page. We apologize for the inconvenience.&lt;/p&gt;
    &lt;/noscript&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Add critical css color variables</p>
<pre><code class="html language-html">&lt;!-- Critical colors --&gt;
&lt;style&gt;
    :root {
        font-size: 100%;

        --loading-bar: #8bffe2;
        --loading-bar-background: hsl(165, 100%, 93%);
        --loading-bar-shadow: rgba(139, 255, 226, 0.87);
        --loading-background: #fafafa;
        --loading-font: #1A1A1A;
    }
    @media (prefers-color-scheme: dark) {
        :root {
            --loading-bar: #8bffe2;
            --loading-bar-background: hsl(165, 25%, 15%);
            --loading-bar-shadow: rgba(139, 255, 226, 0.87);
            --loading-background: #1A1A1A;
            --loading-font: #fff;
        }
    }
&lt;/style&gt;
</code></pre>
<p>Add hard loading animation CSS</p>
<pre><code class="html language-html">&lt;style&gt;
    page-loading {
        width: 100vw;
        height: 100vh;
        display: flex;
        position: fixed;
        top: 0;
        left: 0;
        justify-content: center;
        align-items: center;
        flex-flow: column wrap;
        background-color: var(--loading-background);
        font-size: 1.25rem;
        z-index: 1000000;
        user-select: none;
        pointer-events: none;
        cursor: wait;
        text-align: center;
        visibility: hidden;
        opacity: 0;
        transition: all 150ms 150ms ease;
    }
    html[state="hard-loading"] page-loading {
        visibility: visible;
        opacity: 1;
    }

    page-loading djinnjs-file-loading-message,
    page-loading djinnjs-file-loading-value {
        line-height: 1.618;
        display: inline-block;
        font-size: 1.125rem;
        font-weight: 400;
        font-family: system-ui, BlinkMacSystemFont, -apple-system, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        white-space: nowrap;
        opacity: 0.87;
        color: var(--loading-font);
    }
    page-loading page-loading-bar {
        width: 200px;
        margin-top: 0.5rem;
        height: 2px;
        position: relative;
        background-color: var(--loading-bar-background);
        overflow: hidden;
        display: block;
        box-shadow: inset 0 0 2px rgba(51,51,51,0.15);
    }
    page-loading page-loading-bar bar-one {
        left: -145%;
        position: absolute;
        box-sizing: border-box;
        width: 100%;
        height: 100%;
        animation: primaryBar 2s infinite linear;
    }
    page-loading page-loading-bar bar-one::before {
        content: "";
        background-color: var(--loading-bar);
        display: inline-block;
        box-sizing: border-box;
        position: absolute;
        width: 100%;
        height: 100%;
        animation: primaryScale 2s infinite linear;
    }
    page-loading page-loading-bar bar-two {
        left: -100%;
        position: absolute;
        width: 100%;
        box-sizing: border-box;
        height: 100%;
        animation: secondaryBar 2s infinite linear;
    }
    page-loading page-loading-bar bar-two::before {
        content: "";
        background-color: var(--loading-bar);
        display: inline-block;
        box-sizing: border-box;
        position: absolute;
        width: 100%;
        height: 100%;
        animation: secondaryScale 2s infinite linear;
    }
    page-loading resource-counter,
    page-loading resource-total {
        display: inline-block;
    }
    page-loading span.-slash {
        font-size:0.75rem;
        display:inline-block;
        margin:0 0.25rem;
        transform:translateY(-2px);
    }
    @keyframes primaryBar {
        0% {
            transform: translateX(0);
        }
        20% {
            transform: translateX(0);
            animation-timing-function: cubic-bezier(.5,0,.70173,.49582);
        }
        59% {
            transform: translateX(83.67142%);
            animation-timing-function: cubic-bezier(.30244,.38135,.55,.95635);
        }
        100% {
            transform: translateX(200.61106%);
        }
    }
    @keyframes secondaryBar {
        0% {
            transform: translateX(0);
            animation-timing-function: cubic-bezier(.15,0,.51506,.40969);
        }
        25% {
            animation-timing-function: cubic-bezier(.31033,.28406,.8,.73371);
            transform: translateX(37.65191%);
        }
        48.35% {
            animation-timing-function: cubic-bezier(.4,.62704,.6,.90203);
            transform: translateX(84.38617%);
        }
        100% {
            transform: translateX(160.27778%);
        }
    }
    @keyframes primaryScale {
        0% {
            transform: scaleX(.08);
        }
        36% {
            animation-timing-function: cubic-bezier(.33473,.12482,.78584,1);
            transform: scaleX(.08);
        }
        69% {
            animation-timing-function: cubic-bezier(.06,.11,.6,1);
            transform: scaleX(.66148);
        }
        100% {
            transform: scaleX(.08);
        }
    }
    @keyframes secondaryScale {
        0% {
            animation-timing-function: cubic-bezier(.20503,.05705,.57661,.45397);
            transform: scaleX(.08);
        }
        19% {
            animation-timing-function: cubic-bezier(.15231,.19643,.64837,1.00432);
            transform: scaleX(.4571);
        }
        44% {
            animation-timing-function: cubic-bezier(.25776,-.00316,.21176,1.38179);
            transform: scaleX(.72796);
        }
        100% {
            transform: scaleX(.08);
        }
    }
&lt;/style&gt;
</code></pre>
<p>Add noscript CSS</p>
<pre><code class="html language-html">&lt;!-- noscript CSS --&gt;
&lt;noscript&gt;
    &lt;style&gt;    
        page-loading {
            display: none;
        }
        img {
            opacity: 1 !important;
        }
        #noscript-message {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            padding: 1rem 1rem 1rem;
            background-color: var(--background);
            box-shadow: 0 -2px 16px rgba(51,51,51,0.1), -6px 32px rgba(51,51,51,0.1);
            border-radius: 0.25rem 0.25rem 0 0;
            text-align: center;
            z-index: 2000;
        }
    &lt;/style&gt;
    &lt;link rel="stylesheet" href="/assets/noscript.css"&gt;
&lt;/noscript&gt;
</code></pre>
<p>(Optional) Add reset CSS</p>
<pre><code class="html language-html">&lt;!-- Reset CSS --&gt;
&lt;style&gt;
    * {
        position: relative;
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-size: inherit;
        line-height: 1;
        font-weight: inherit;
        font-style: normal;
        text-decoration: none;
        font-family: inherit;
        -webkit-tap-highlight-color: transparent;
        outline: none;
        border: none;
        box-shadow: none;
        color: inherit;
    }
    html {
        height: 100vh;
        overflow-y: auto;
        width: 100vw;
        display: block;
    }
    body {
        margin: 0;
        padding: 0;
        background-color: var(--background);
        color: var(--font);
        display: block;
        min-height: 100%;
        font-size: 1rem;
        width: 100%;
        -webkit-text-size-adjust: 100%;
        font-weight: 400;
        font-family: var(--font-family);
    }
    ul li,
    ol li
    {
        line-height: 1.618;
        list-style-position: inside;
    }

    button
    {
        cursor: pointer;
        background: transparent;
        outline: none;
        border: none;
        user-select: none;
    }
&lt;/style&gt;
</code></pre>
<p>Add web components polyfill if you need to support MS Edge</p>
<pre><code class="html language-html">&lt;!-- Web Components Polyfill --&gt;
&lt;script&gt;
    if (typeof CustomElementRegistry === 'undefined') {
        document.write('&lt;script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.4.0/webcomponents-bundle.js"&gt;&lt;\/script&gt;');
    }
&lt;/script&gt;
</code></pre>
<p>(Optional) Add Google Anallytics script</p>
<pre><code class="html language-html">&lt;!-- Global site tag (gtag.js) - Google Analytics --&gt;
&lt;script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"&gt;&lt;/script&gt;
</code></pre>
<p>Add runtime scripts</p>
<pre><code class="html language-html">&lt;link rel="preload" href="/assets/env.mjs" as="script" crossorigin="anonymous"&gt;
&lt;link rel="preload" href="/assets/broadcaster.mjs" as="script" crossorigin="anonymous"&gt;
&lt;script type="module" src="/assets/runtime.mjs"&gt;&lt;/script&gt;
</code></pre>
<p>Create the source code directory</p>
<pre><code class="bash language-bash">mkdir ./src
</code></pre>
<p>Create <code>colors.scss</code> in <code>src/</code></p>
<pre><code class="scss language-scss">:root {
    --font: #1A1A1A;
    --background: #fff;

    --font-family: system-ui, BlinkMacSystemFont, -apple-system, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;

    @media (prefers-color-scheme: dark) {
        --font: #fff;
        --background: #1A1A1A;
    }
}
</code></pre>
<p>Create <code>soft-loading.scss</code></p>
<pre><code class="scss language-scss">soft-loading {
    width: 100vw;
    height: 3px;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 99999;
    transform: translate3d(0, -101%, 0);
    transition: transform 125ms cubic-bezier(0.4, 0, 0.6, 1);
    background-color: var(--loading-bar-background);
    display: inline-block;
    opacity: 0;
    user-select: none;
    visibility: hidden;
    pointer-events: none;
}

html[state='soft-loading'] * {
    cursor: wait !important;
}

html[state='soft-loading'] soft-loading {
    transform: translate3d(0, 0, 0);
    opacity: 1;
    visibility: visible;
    transition: transform 150ms cubic-bezier(0, 0, 0.2, 1);
}

html[state='soft-loading'] soft-loading transition-bar-one {
    animation: primaryBar 2s infinite linear;
}

html[state='soft-loading'] soft-loading transition-bar-one:before {
    animation: primaryScale 2s infinite linear;
}

html[state='soft-loading'] soft-loading transition-bar-two {
    animation: secondaryBar 2s infinite linear;
}

html[state='soft-loading'] soft-loading transition-bar-two:before {
    animation: secondaryScale 2s infinite linear;
}

soft-loading transition-bar-one {
    left: -145%;
    position: absolute;
    width: 100%;
    height: 100%;
}

soft-loading transition-bar-one::before {
    content: '';
    background-color: var(--loading-bar);
    box-shadow: 0 0 3px var(--loading-bar-shadow);
    display: inline-block;
    position: absolute;
    width: 100%;
    height: 100%;
}

soft-loading transition-bar-two {
    left: -54%;
    position: absolute;
    width: 100%;
    height: 100%;
}

soft-loading transition-bar-two::before {
    content: '';
    background-color: var(--loading-bar);
    box-shadow: 0 0 3px var(--loading-bar-shadow);
    display: inline-block;
    position: absolute;
    width: 100%;
    height: 100%;
}
</code></pre>
<p>Create <code>page-transition.scss</code></p>
<pre><code class="scss language-scss">page-transition {
    width: 100vw;
    height: 2px;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 99999;
    display: inline-block;
    visibility: hidden;
    user-select: none;
    pointer-events: none;

    html[state="page-loading"] &amp;,
    html[state="page-loading-complete"] &amp; {
        visibility: visible;
    }

    page-transition-bar {
        position: absolute;
        top: 0;
        left: 0;
        display: inline-block;
        width: 100%;
        height: 100%;
        transform: scaleX(0);
        transform-origin: left center;
        background-color: var(--loading-bar);
        box-shadow: 0 0 3px var(--loading-bar-shadow);
        overflow: hidden;

        html[state="page-loading"] &amp; {
            animation: startLoading 600ms ease-out forwards;
        }

        html[state="page-loading-complete"] &amp; {
            transform: scaleX(0.33);
            animation: endLoading 600ms ease forwards;
        }

        &amp;::after {
            content:"";
            display: inline-block;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, rgba(255,255,255,0), rgba(255,255,255,0.3), rgba(255,255,255,0), rgba(255,255,255,0.3), rgba(255,255,255,0));
            animation: gradientLoop 2000ms infinite;
        }
    }
}

@keyframes gradientLoop
{
    from {
        transform: translateX(100%);
    }
    to {
        transform: translateX(-100%);
    }
}

@keyframes startLoading {
    from {
        transform: scaleX(0);
    }
    to {
        transform: scaleX(0.66);
    }
}

@keyframes endLoading {
    0% {
        transform: scaleX(0.66) translateX(0);
    }
    25%, 50% {
        transform: scaleX(1) translateX(0);
    }
    100% {
        transform: scaleX(1) translateX(100%);
    }
}
</code></pre>
<p>Add the CSS file request attribute to the <code>&lt;main&gt;</code> element</p>
<pre><code class="html language-html">&lt;main eager-load-css="colors soft-loading page-transition snackbar"&gt;
</code></pre>
<p>Add a temporary TypeScript file to prevent TypeScript compiler errors</p>
<pre><code class="javascript language-javascript">console.log('This is a temp file preventing TSC errors');
</code></pre>
<p>Run the build command</p>
<pre><code class="bash language-bash">npm run build
</code></pre>
<p>To view the site run the preview command</p>
<pre><code class="bash language-bash">npm run preview
</code></pre></article>
        </main>
    </body>
</html>
