<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>Progressive Enhancements</title>

        <link href="/normalize.css" rel="stylesheet" />
        <link href="/reset.css" rel="stylesheet" />
        <link href="/brixi.css" rel="stylesheet" />
        <link href="/base.css" rel="stylesheet" />

        <script defer src="/prism.js"></script>
        <link href="/prism.css" rel="stylesheet" />

        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet" />

        <script defer src="/nav.js"></script>
        <script defer src="/page-jump-generator.js"></script>
    </head>
    <body>
        <main>
            <aside><nav><a href="/" class="project-name">DjinnJS</a><a href="https://github.com/Pageworks/djinnjs"><span>GitHub</span></a><a href="https://www.npmjs.com/package/djinnjs"><span>NPM</span></a><header>Documents</header><a href="/code-of-conduct" data-slug="/code-of-conduct"><span>code of conduct</span></a><a href="/configuration" data-slug="/configuration"><span>configuration</span></a><a href="/contributing" data-slug="/contributing"><span>contributing</span></a><a href="/developers" data-slug="/developers"><span>developers</span></a><a href="/readme" data-slug="/readme"><span>readme</span></a><header>core</header><a href="/core/loading-animation" data-slug="/core/loading-animation"><span>loading animation</span></a><a href="/core/loading-css" data-slug="/core/loading-css"><span>loading css</span></a><a href="/core/progressive-enhancements" data-slug="/core/progressive-enhancements"><span>progressive enhancements</span></a><a href="/core/stateful-components" data-slug="/core/stateful-components"><span>stateful components</span></a><a href="/core/web-components" data-slug="/core/web-components"><span>web components</span></a><header>guides</header><a href="/guides/adding-npm-packages" data-slug="/guides/adding-npm-packages"><span>adding npm packages</span></a><a href="/guides/frameworks" data-slug="/guides/frameworks"><span>frameworks</span></a><a href="/guides/installation" data-slug="/guides/installation"><span>installation</span></a><a href="/guides/lazy-images" data-slug="/guides/lazy-images"><span>lazy images</span></a><a href="/guides/quick-start-guide" data-slug="/guides/quick-start-guide"><span>quick start guide</span></a></nav></aside>
            <article><h1 id="progressiveenhancements">Progressive Enhancements</h1>
<p>Use progressive enhancements to keep your project fast and responsive on low-end devices and slow connections. Progressive enhancement checks are provided by the Env class.</p>
<h2 id="networkconnections">Network Connections</h2>
<p><code>env.connection</code> will return <code>'4g' | '3g' | '2g' | 'slow-2g'</code> based on the users network connection. Due to limited <a href="https://developer.mozilla.org/en-US/docs/Web/API/Network_Information_API">Network Information API</a> support <code>4g</code> is the default on most browsers.</p>
<p>To check if the current connection matches the minimum you're requiring use the <code>checkConnection()</code> function.</p>
<pre><code class="javascript language-javascript">import { checkConnection } from "djinnjs/env";

if (checkConnection("3g")) {
    // This code will run on a 3g or 4g connection
}
</code></pre>
<h2 id="datasavermode">Data Saver Mode</h2>
<p><code>dataSaver</code> will return true when the user has data saver mode enabled on their device.</p>
<pre><code class="javascript language-javascript">import { dataSaver } from "djinnjs/env";

if (!dataSaver) {
    // Do or fetch something
}
</code></pre>
<h2 id="memory">Memory</h2>
<p><code>env.memory</code> will return the approximate amount of device memory in gigabytes. Due to limited <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/deviceMemory">Navigator.deviceMemory</a> support 4 is the default value.</p>
<h2 id="cpu">CPU</h2>
<p><code>env.cpu</code> will return the number of logical processor cores. <a href="https://developer.mozilla.org/en-US/docs/Web/API/NavigatorConcurrentHardware/hardwareConcurrency">See here</a> for additional API information.</p>
<h2 id="threadpool">Thread Pool</h2>
<p><code>env.threadPool</code> will return the number of available logical processor cores currently, they will always return 0 on Safari due to browser limitations.</p>
<p>To update the thread pool count use the <code>reserveThread()</code> and <code>releaseThread()</code> functions.</p>
<pre><code class="javascript language-javascript">import { reserveThread, releaseThread } from "djinnjs/env";
reserveThread()
    .then(() =&gt; {
        // TODO: spawn web worker
    })
    .catch(() =&gt; {
        // Thread pool is empty
    });

if (webWorkerTermiated) {
    releaseThread();
}
</code></pre></article>
        </main>
    </body>
</html>
