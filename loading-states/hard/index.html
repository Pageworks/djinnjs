<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>Dev Docs</title>

        <link href="/normalize.css" rel="stylesheet" />
        <link href="/reset.css" rel="stylesheet" />
        <link href="/brixi.css" rel="stylesheet" />
        <link href="/base.css" rel="stylesheet" />

        <script defer src="/prism.js"></script>
        <link href="/prism.css" rel="stylesheet" />

        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet" />

        <script defer src="/nav.js"></script>
    </head>
    <body>
        <main>
            <aside><nav><header>Documents</header><a href="/code-of-conduct" data-slug="/code-of-conduct"><span>code of conduct</span></a><a href="/configuration" data-slug="/configuration"><span>configuration</span></a><a href="/contributing" data-slug="/contributing"><span>contributing</span></a><a href="/developers" data-slug="/developers"><span>developers</span></a><a href="/installation" data-slug="/installation"><span>installation</span></a><a href="/readme" data-slug="/readme"><span>readme</span></a><header>core</header><a href="/core/importing-resources" data-slug="/core/importing-resources"><span>importing resources</span></a><a href="/core/lazy-loading" data-slug="/core/lazy-loading"><span>lazy loading</span></a><a href="/core/pjax" data-slug="/core/pjax"><span>pjax</span></a><a href="/core/progressive-enhancements" data-slug="/core/progressive-enhancements"><span>progressive enhancements</span></a><a href="/core/requesting-css" data-slug="/core/requesting-css"><span>requesting css</span></a><a href="/core/web-components" data-slug="/core/web-components"><span>web components</span></a><header>guides</header><a href="/guides/adding-npm-packages" data-slug="/guides/adding-npm-packages"><span>adding npm packages</span></a><a href="/guides/demo-project" data-slug="/guides/demo-project"><span>demo project</span></a><a href="/guides/frameworks" data-slug="/guides/frameworks"><span>frameworks</span></a><header>loading states</header><a href="/loading-states/hard" data-slug="/loading-states/hard"><span>hard</span></a><a href="/loading-states/page" data-slug="/loading-states/page"><span>page</span></a><a href="/loading-states/soft" data-slug="/loading-states/soft"><span>soft</span></a><header>messaging system</header><a href="/messaging-system/actor-model" data-slug="/messaging-system/actor-model"><span>actor model</span></a><a href="/messaging-system/actors" data-slug="/messaging-system/actors"><span>actors</span></a><a href="/messaging-system/broadcaster" data-slug="/messaging-system/broadcaster"><span>broadcaster</span></a><a href="/messaging-system/hooks" data-slug="/messaging-system/hooks"><span>hooks</span></a><a href="/messaging-system/sending-messages" data-slug="/messaging-system/sending-messages"><span>sending messages</span></a><header>page transitions</header><a href="/page-transitions/custom" data-slug="/page-transitions/custom"><span>custom</span></a><a href="/page-transitions/default" data-slug="/page-transitions/default"><span>default</span></a></nav></aside>
            <article><h1 id="hardloading">Hard Loading</h1>
<p>The hard loading animation is used to hide the page while critical CSS is loading. It is used by the Runtime class to inform the user what stage the loading process is in along with how many resources have finished loading. The hard loading animation should not by manually triggered.</p>
<p>DjinnJS does not require any specific HTML or CSS in order to run. It's recommended you use the <a href="/loading/hard#example-animation">example below</a> or you create your own loading animaiton.</p>
<h2 id="customanimation">Custom Animation</h2>
<p>Animations are controlled by the Env class and the documents <code>state</code> attribute. The hard loading animation should play whenever the <code>state</code> is set to <code>hard-loading</code></p>
<pre><code class="scss language-scss">page-loading-animation {
    visibility: hidden;
    opacity: 0;
    pointer-events: none;

    html[state="hard-loading"] &amp; {
        visibility: visible;
        opacity: 1;
        pointer-events: all;
    }
}
</code></pre>
<p>The file counter can be displayed by adding a <code>&lt;djinnjs-file-loading-value&gt;</code> element and state messages are available through a <code>&lt;djinnjs-file-loading-message&gt;</code> element.</p>
<p>The <code>&lt;djinnjs-file-loading-value&gt;</code> element has a <code>state</code> attribute that is set to <code>enabled</code> when the Runtime class beings loading eager CSS files. The value is displayed in the X/Y format by default but can be switched to use the X% format by setting the <code>usePercentage</code> setting to <code>true</code> within the config file.</p>
<p>The <code>&lt;djinnjs-file-loading-message&gt;</code> element has a <code>state</code> attribute that will be set to the numbers 1-3 as it updates. The states are as follows:</p>
<ol>
<li>"Loading page"</li>
<li>"Collecting resources"</li>
<li>"Loading resouces:"</li>
</ol>
<p>The messages can not be configured, however, you can use the <code>state</code> attribute with the CSS to control the element or sibling elements.</p>
<h2 id="exampleanimation">Example Animation</h2>
<p>The example below is used in the <a href="/guides/demo-project">Demo Project</a> and on this website.</p>
<pre><code class="html language-html">&lt;page-loading&gt;
    &lt;div&gt;
        &lt;djinnjs-file-loading-message&gt;Loading page&lt;/djinnjs-file-loading-message&gt;
        &lt;djinnjs-file-loading-value&gt;&lt;/djinnjs-file-loading-value&gt;
        &lt;page-loading-bar&gt;
            &lt;bar-one&gt;&lt;/bar-one&gt;
            &lt;bar-two&gt;&lt;/bar-two&gt;
        &lt;/page-loading-bar&gt;
    &lt;/div&gt;
&lt;/page-loading&gt;
</code></pre>
<p>Since the hard loading animation is the first visible element the CSS should be written in the <code>&lt;head&gt;</code></p>
<pre><code class="html language-html">&lt;style&gt;
    page-loading {
        width: 100vw;
        height: 100vh;
        display: flex;
        position: fixed;
        top: 0;
        left: 0;
        justify-content: center;
        align-items: center;
        flex-flow: column wrap;
        background-color: var(--loading-background);
        font-size: 1.25rem;
        z-index: 1000000;
        user-select: none;
        pointer-events: none;
        cursor: wait;
        text-align: center;
        visibility: hidden;
        opacity: 0;
        transition: all 150ms 150ms ease;
    }
    html[state="hard-loading"] page-loading {
        visibility: visible;
        opacity: 1;
    }

    page-loading djinnjs-file-loading-message,
    page-loading djinnjs-file-loading-value {
        line-height: 1.618;
        display: inline-block;
        font-size: 1.125rem;
        font-weight: 400;
        font-family: system-ui, BlinkMacSystemFont, -apple-system, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        white-space: nowrap;
        opacity: 0.87;
        color: var(--loading-font);
    }
    page-loading page-loading-bar {
        width: 200px;
        margin-top: 0.5rem;
        height: 2px;
        position: relative;
        background-color: var(--loading-bar-background);
        overflow: hidden;
        display: block;
        box-shadow: inset 0 0 2px rgba(51,51,51,0.15);
    }
    page-loading page-loading-bar bar-one {
        left: -145%;
        position: absolute;
        box-sizing: border-box;
        width: 100%;
        height: 100%;
        animation: primaryBar 2s infinite linear;
    }
    page-loading page-loading-bar bar-one::before {
        content: "";
        background-color: var(--loading-bar);
        display: inline-block;
        box-sizing: border-box;
        position: absolute;
        width: 100%;
        height: 100%;
        animation: primaryScale 2s infinite linear;
    }
    page-loading page-loading-bar bar-two {
        left: -100%;
        position: absolute;
        width: 100%;
        box-sizing: border-box;
        height: 100%;
        animation: secondaryBar 2s infinite linear;
    }
    page-loading page-loading-bar bar-two::before {
        content: "";
        background-color: var(--loading-bar);
        display: inline-block;
        box-sizing: border-box;
        position: absolute;
        width: 100%;
        height: 100%;
        animation: secondaryScale 2s infinite linear;
    }
    page-loading resource-counter,
    page-loading resource-total {
        display: inline-block;
    }
    page-loading span.-slash {
        font-size:0.75rem;
        display:inline-block;
        margin:0 0.25rem;
        transform:translateY(-2px);
    }
    @keyframes primaryBar {
        0% {
            transform: translateX(0);
        }
        20% {
            transform: translateX(0);
            animation-timing-function: cubic-bezier(.5,0,.70173,.49582);
        }
        59% {
            transform: translateX(83.67142%);
            animation-timing-function: cubic-bezier(.30244,.38135,.55,.95635);
        }
        100% {
            transform: translateX(200.61106%);
        }
    }
    @keyframes secondaryBar {
        0% {
            transform: translateX(0);
            animation-timing-function: cubic-bezier(.15,0,.51506,.40969);
        }
        25% {
            animation-timing-function: cubic-bezier(.31033,.28406,.8,.73371);
            transform: translateX(37.65191%);
        }
        48.35% {
            animation-timing-function: cubic-bezier(.4,.62704,.6,.90203);
            transform: translateX(84.38617%);
        }
        100% {
            transform: translateX(160.27778%);
        }
    }
    @keyframes primaryScale {
        0% {
            transform: scaleX(.08);
        }
        36% {
            animation-timing-function: cubic-bezier(.33473,.12482,.78584,1);
            transform: scaleX(.08);
        }
        69% {
            animation-timing-function: cubic-bezier(.06,.11,.6,1);
            transform: scaleX(.66148);
        }
        100% {
            transform: scaleX(.08);
        }
    }
    @keyframes secondaryScale {
        0% {
            animation-timing-function: cubic-bezier(.20503,.05705,.57661,.45397);
            transform: scaleX(.08);
        }
        19% {
            animation-timing-function: cubic-bezier(.15231,.19643,.64837,1.00432);
            transform: scaleX(.4571);
        }
        44% {
            animation-timing-function: cubic-bezier(.25776,-.00316,.21176,1.38179);
            transform: scaleX(.72796);
        }
        100% {
            transform: scaleX(.08);
        }
    }
&lt;/style&gt;
</code></pre>
<h2 id="configuringcolors">Configuring Colors</h2>
<p>The colors can be configured using these CSS variables:</p>
<pre><code class="html language-html">&lt;style&gt;
    :root {
        font-size: 100%;

        --loading-bar: #8bffe2;
        --loading-bar-background: hsl(165, 100%, 93%);
        --loading-bar-shadow: rgba(139, 255, 226, 0.87);
        --loading-background: #fafafa;
        --loading-font: #1A1A1A;
    }
    @media (prefers-color-scheme: dark) {
        :root {
            --loading-bar: #8bffe2;
            --loading-bar-background: hsl(165, 25%, 15%);
            --loading-bar-shadow: rgba(139, 255, 226, 0.87);
            --loading-background: #1A1A1A;
            --loading-font: #fff;
        }
    }
&lt;/style&gt;
&lt;noscript&gt;
    &lt;style&gt;
        page-loading {
            display: none;
        }
    &lt;/style&gt;
&lt;/noscript&gt;
</code></pre></article>
        </main>
    </body>
</html>
