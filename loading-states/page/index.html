<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>Dev Docs</title>

        <link href="/normalize.css" rel="stylesheet" />
        <link href="/reset.css" rel="stylesheet" />
        <link href="/brixi.css" rel="stylesheet" />
        <link href="/base.css" rel="stylesheet" />

        <script defer src="/prism.js"></script>
        <link href="/prism.css" rel="stylesheet" />

        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet" />

        <script defer src="/nav.js"></script>
    </head>
    <body>
        <main>
            <aside><nav><header>Documents</header><a href="/code-of-conduct" data-slug="/code-of-conduct"><span>code of conduct</span></a><a href="/configuration" data-slug="/configuration"><span>configuration</span></a><a href="/contributing" data-slug="/contributing"><span>contributing</span></a><a href="/developers" data-slug="/developers"><span>developers</span></a><a href="/installation" data-slug="/installation"><span>installation</span></a><a href="/readme" data-slug="/readme"><span>readme</span></a><header>core</header><a href="/core/importing-resources" data-slug="/core/importing-resources"><span>importing resources</span></a><a href="/core/lazy-loading" data-slug="/core/lazy-loading"><span>lazy loading</span></a><a href="/core/pjax" data-slug="/core/pjax"><span>pjax</span></a><a href="/core/progressive-enhancements" data-slug="/core/progressive-enhancements"><span>progressive enhancements</span></a><a href="/core/requesting-css" data-slug="/core/requesting-css"><span>requesting css</span></a><a href="/core/web-components" data-slug="/core/web-components"><span>web components</span></a><header>guides</header><a href="/guides/adding-npm-packages" data-slug="/guides/adding-npm-packages"><span>adding npm packages</span></a><a href="/guides/demo-project" data-slug="/guides/demo-project"><span>demo project</span></a><a href="/guides/frameworks" data-slug="/guides/frameworks"><span>frameworks</span></a><header>loading states</header><a href="/loading-states/hard" data-slug="/loading-states/hard"><span>hard</span></a><a href="/loading-states/page" data-slug="/loading-states/page"><span>page</span></a><a href="/loading-states/soft" data-slug="/loading-states/soft"><span>soft</span></a><header>messaging system</header><a href="/messaging-system/actor-model" data-slug="/messaging-system/actor-model"><span>actor model</span></a><a href="/messaging-system/actors" data-slug="/messaging-system/actors"><span>actors</span></a><a href="/messaging-system/broadcaster" data-slug="/messaging-system/broadcaster"><span>broadcaster</span></a><a href="/messaging-system/hooks" data-slug="/messaging-system/hooks"><span>hooks</span></a><a href="/messaging-system/sending-messages" data-slug="/messaging-system/sending-messages"><span>sending messages</span></a><header>page transitions</header><a href="/page-transitions/custom" data-slug="/page-transitions/custom"><span>custom</span></a><a href="/page-transitions/default" data-slug="/page-transitions/default"><span>default</span></a></nav></aside>
            <article><h1 id="pageloading">Page Loading</h1>
<p>The page loading animation is used by the Pjax class and cannot manually be triggered. DjinnJS does not require any specific HTML or CSS in order to run. It's recommended you use the <a href="/loading/hard#example-animation">example below</a> or you create your own loading animaiton.</p>
<h2 id="customanimation">Custom Animation</h2>
<p>Animations are controlled by the Env class and the documents <code>state</code> attribute. The page loading animation should play whenever the <code>state</code> is set to <code>page-loading</code></p>
<pre><code class="scss language-scss">page-loading-animation {
    visibility: hidden;
    opacity: 0;
    pointer-events: none;

    html[state="page-loading"] &amp; {
        visibility: visible;
        opacity: 1;
        pointer-events: all;
    }
}
</code></pre>
<p>The page loading animation has an additional state of <code>page-loading-complete</code> and is set once the page has successfully swapped to the new page. The complete state last 600ms before resuming the <code>soft-loading</code> or <code>idling</code> state. Ideally the completed state should be used to finish the "hanging" animation. For more information about designing for speed and hacking user perception <a href="https://youtu.be/0-3GBgRg9ow">watch this video</a>.</p>
<h2 id="exampleanimation">Example Animation</h2>
<pre><code class="html language-html">&lt;page-transition&gt;
    &lt;page-transition-bar&gt;&lt;/page-transition-bar&gt;
&lt;/page-transition&gt;
</code></pre>
<p>Since the page loading animation is not visible immediately it can be a CSS file that is eager loaded:</p>
<h4 id="pagetransitionscss">page-transition.scss</h4>
<pre><code class="scss language-scss">page-transition {
    width: 100vw;
    height: 2px;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 99999;
    display: inline-block;
    visibility: hidden;
    user-select: none;
    pointer-events: none;

    html[state="page-loading"] &amp;,
    html[state="page-loading-complete"] &amp; {
        visibility: visible;
    }

    page-transition-bar {
        position: absolute;
        top: 0;
        left: 0;
        display: inline-block;
        width: 100%;
        height: 100%;
        transform: scaleX(0);
        transform-origin: left center;
        background-color: var(--loading-bar);
        box-shadow: 0 0 3px var(--loading-bar-shadow);
        overflow: hidden;

        html[state="page-loading"] &amp; {
            animation: startLoading 600ms ease-out forwards;
        }

        html[state="page-loading-complete"] &amp; {
            transform: scaleX(0.33);
            animation: endLoading 600ms ease forwards;
        }

        &amp;::after {
            content:"";
            display: inline-block;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, rgba(255,255,255,0), rgba(255,255,255,0.3), rgba(255,255,255,0), rgba(255,255,255,0.3), rgba(255,255,255,0));
            animation: gradientLoop 2000ms infinite;
        }
    }
}

@keyframes gradientLoop
{
    from {
        transform: translateX(100%);
    }
    to {
        transform: translateX(-100%);
    }
}

@keyframes startLoading {
    from {
        transform: scaleX(0);
    }
    to {
        transform: scaleX(0.66);
    }
}

@keyframes endLoading {
    0% {
        transform: scaleX(0.66) translateX(0);
    }
    25%, 50% {
        transform: scaleX(1) translateX(0);
    }
    100% {
        transform: scaleX(1) translateX(100%);
    }
}
</code></pre>
<p>It uses the same colors as the hard loading animation, <a href="/loading/hard#configuring-colors">click here</a> for more information.</p></article>
        </main>
    </body>
</html>
