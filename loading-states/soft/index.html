<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>undefined</title>

        <link href="/normalize.css" rel="stylesheet" />
        <link href="/reset.css" rel="stylesheet" />
        <link href="/brixi.css" rel="stylesheet" />
        <link href="/base.css" rel="stylesheet" />

        <script defer src="/prism.js"></script>
        <link href="/prism.css" rel="stylesheet" />

        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet" />

        <script defer src="/nav.js"></script>
        <script defer src="/page-jump-generator.js"></script>
    </head>
    <body>
        <main>
            <aside><nav><header>Documents</header><a href="/code-of-conduct" data-slug="/code-of-conduct"><span>code of conduct</span></a><a href="/configuration" data-slug="/configuration"><span>configuration</span></a><a href="/contributing" data-slug="/contributing"><span>contributing</span></a><a href="/developers" data-slug="/developers"><span>developers</span></a><a href="/installation" data-slug="/installation"><span>installation</span></a><a href="/readme" data-slug="/readme"><span>readme</span></a><header>core</header><a href="/core/importing-resources" data-slug="/core/importing-resources"><span>importing resources</span></a><a href="/core/lazy-loading" data-slug="/core/lazy-loading"><span>lazy loading</span></a><a href="/core/pjax" data-slug="/core/pjax"><span>pjax</span></a><a href="/core/progressive-enhancements" data-slug="/core/progressive-enhancements"><span>progressive enhancements</span></a><a href="/core/requesting-css" data-slug="/core/requesting-css"><span>requesting css</span></a><a href="/core/web-components" data-slug="/core/web-components"><span>web components</span></a><header>guides</header><a href="/guides/adding-npm-packages" data-slug="/guides/adding-npm-packages"><span>adding npm packages</span></a><a href="/guides/demo-project" data-slug="/guides/demo-project"><span>demo project</span></a><a href="/guides/frameworks" data-slug="/guides/frameworks"><span>frameworks</span></a><header>loading states</header><a href="/loading-states/hard" data-slug="/loading-states/hard"><span>hard</span></a><a href="/loading-states/page" data-slug="/loading-states/page"><span>page</span></a><a href="/loading-states/soft" data-slug="/loading-states/soft"><span>soft</span></a><header>messaging system</header><a href="/messaging-system/actor-model" data-slug="/messaging-system/actor-model"><span>actor model</span></a><a href="/messaging-system/actors" data-slug="/messaging-system/actors"><span>actors</span></a><a href="/messaging-system/broadcaster" data-slug="/messaging-system/broadcaster"><span>broadcaster</span></a><a href="/messaging-system/hooks" data-slug="/messaging-system/hooks"><span>hooks</span></a><a href="/messaging-system/sending-messages" data-slug="/messaging-system/sending-messages"><span>sending messages</span></a></nav></aside>
            <article><h1 id="softloading">Soft Loading</h1>
<p>The soft loading animation is used by the Env class. Whenever <code>env.startLoading()</code> is called the DOM's state is set to <code>soft-loading</code> and unlike the hard loading animation the soft loading state doesn't have states or a calculated end. It is an infinite loading animation that can be used when you're unsure how long something will take to load.</p>
<p>DjinnJS does not require any specific HTML or CSS in order to run. It's recommended you use the <a href="/loading/hard#example-animation">example below</a> or you create your own loading animaiton.</p>
<h2 id="customanimation">Custom Animation</h2>
<p>Animations are controlled by the Env class and the documents <code>state</code> attribute. The soft loading animation should play whenever the <code>state</code> is set to <code>soft-loading</code></p>
<pre><code class="scss language-scss">infinite-loading-animation {
    visibility: hidden;
    opacity: 0;
    pointer-events: none;

    html[state="soft-loading"] &amp; {
        visibility: visible;
        opacity: 1;
        pointer-events: all;
    }
}
</code></pre>
<h2 id="exampleanimation">Example Animation</h2>
<pre><code class="html language-html">&lt;soft-loading&gt;
    &lt;transition-bar-one&gt;&lt;/transition-bar-one&gt;
    &lt;transition-bar-two&gt;&lt;/transition-bar-two&gt;
&lt;/soft-loading&gt;
</code></pre>
<p>Since the soft loading animation isn't immediately visible it can be a CSS file that is eager loaded.</p>
<h4 id="softloadingscss">soft-loading.scss</h4>
<pre><code class="scss language-scss">soft-loading {
    width: 100vw;
    height: 3px;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 99999;
    transform: translate3d(0, -101%, 0);
    transition: transform 125ms cubic-bezier(0.4, 0, 0.6, 1);
    background-color: var(--loading-bar-background);
    display: inline-block;
    opacity: 0;
    user-select: none;
    visibility: hidden;
    pointer-events: none;
}

html[state='soft-loading'] * {
    cursor: wait !important;
}

html[state='soft-loading'] soft-loading {
    transform: translate3d(0, 0, 0);
    opacity: 1;
    visibility: visible;
    transition: transform 150ms cubic-bezier(0, 0, 0.2, 1);
}

html[state='soft-loading'] soft-loading transition-bar-one {
    animation: primaryBar 2s infinite linear;
}

html[state='soft-loading'] soft-loading transition-bar-one:before {
    animation: primaryScale 2s infinite linear;
}

html[state='soft-loading'] soft-loading transition-bar-two {
    animation: secondaryBar 2s infinite linear;
}

html[state='soft-loading'] soft-loading transition-bar-two:before {
    animation: secondaryScale 2s infinite linear;
}

soft-loading transition-bar-one {
    left: -145%;
    position: absolute;
    width: 100%;
    height: 100%;
}

soft-loading transition-bar-one::before {
    content: '';
    background-color: var(--loading-bar);
    box-shadow: 0 0 3px var(--loading-bar-shadow);
    display: inline-block;
    position: absolute;
    width: 100%;
    height: 100%;
}

soft-loading transition-bar-two {
    left: -54%;
    position: absolute;
    width: 100%;
    height: 100%;
}

soft-loading transition-bar-two::before {
    content: '';
    background-color: var(--loading-bar);
    box-shadow: 0 0 3px var(--loading-bar-shadow);
    display: inline-block;
    position: absolute;
    width: 100%;
    height: 100%;
}
</code></pre>
<p>It uses the same colors as the hard loading animation, <a href="/loading/hard#configuring-colors">click here</a> for more information.</p>
<h2 id="example">Example</h2>
<p>In this example a web component needs to load the D3 JavaScript library. The soft loading animation will displayed while the library is being fetched.</p>
<pre><code class="javascript language-javascript">import { fetchJS } from 'djinnjs/fetch';
import { env } from 'djinnjs/env';

class CustomComponent extends HTMLElement {
    init(){
        // Do something with d3.js
    }
    connectedCallback() {
        const ticket = env.startLoading();
        fetchJS('d3').then(() =&gt; {
            env.stopLoading(ticket);
            this.init();
        });
    }
}
</code></pre></article>
        </main>
    </body>
</html>
